CREATE TABLE "USERS" (
  "ID_USER" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "NAME" varchar(30) NOT NULL,
  "EMAIL" varchar(50) NOT NULL,
  "PASSWORD" varchar(10) NOT NULL,
  "AGE" varchar(2) NOT NULL
);

CREATE TABLE "COURSES" (
  "ID_COURSES" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "TITLE" varchar(50) NOT NULL,
  "DESCRIPTION" varchar(500) NOT NULL,
  "LEVEL" INT GENERATED BY DEFAULT AS IDENTITY,
  "TEACHER" varchar(50)
);

CREATE TABLE "COURSE_VIDEO" (
  "ID_COURSEVIDEO" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "TITLE" varchar(50),
  "URL" varchar(50)
);

CREATE TABLE "CATEGORIES" (
  "ID_CATEGORIES" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "NAME" varchar(30)
);

CREATE TABLE "ROLES" (
  "ID_ROLES" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "NAME" varchar(30)
);

CREATE TABLE "USERS_COURSES" (
  "USERS_ID_USER" int,
  "COURSES_ID_COURSES" int,
  PRIMARY KEY ("USERS_ID_USER", "COURSES_ID_COURSES")
);

ALTER TABLE "USERS_COURSES" ADD FOREIGN KEY ("USERS_ID_USER") REFERENCES "USERS" ("ID_USER");

ALTER TABLE "USERS_COURSES" ADD FOREIGN KEY ("COURSES_ID_COURSES") REFERENCES "COURSES" ("ID_COURSES");


CREATE TABLE "COURSE_VIDEO_USERS" (
  "COURSE_VIDEO_ID_COURSEVIDEO" int,
  "USERS_ID_USER" int,
  PRIMARY KEY ("COURSE_VIDEO_ID_COURSEVIDEO", "USERS_ID_USER")
);

ALTER TABLE "COURSE_VIDEO_USERS" ADD FOREIGN KEY ("COURSE_VIDEO_ID_COURSEVIDEO") REFERENCES "COURSE_VIDEO" ("ID_COURSEVIDEO");

ALTER TABLE "COURSE_VIDEO_USERS" ADD FOREIGN KEY ("USERS_ID_USER") REFERENCES "USERS" ("ID_USER");


CREATE TABLE "USERS_ROLES" (
  "USERS_ID_USER" int,
  "ROLES_ID_ROLES" int,
  PRIMARY KEY ("USERS_ID_USER", "ROLES_ID_ROLES")
);

ALTER TABLE "USERS_ROLES" ADD FOREIGN KEY ("USERS_ID_USER") REFERENCES "USERS" ("ID_USER");

ALTER TABLE "USERS_ROLES" ADD FOREIGN KEY ("ROLES_ID_ROLES") REFERENCES "ROLES" ("ID_ROLES");


ALTER TABLE "CATEGORIES" ADD FOREIGN KEY ("ID_CATEGORIES") REFERENCES "COURSES" ("LEVEL");

INSERT INTO "USERS" ("NAME", "EMAIL", "PASSWORD", "AGE") VALUES ('LUISA', 'LUISA21@GMAIL.COM', '12345678', '21');
INSERT INTO "USERS" ("NAME", "EMAIL", "PASSWORD", "AGE") VALUES ('PEDRO', 'PEDRO19@GMAIL.COM', '23456789', '19');
INSERT INTO "CATEGORIES" ("NAME") VALUES ('BEGINNER'), ('INTERMEDIATE'), ('EXPERT');
INSERT INTO "COURSES" ("TITLE", "DESCRIPTION", "LEVEL", "TEACHER") VALUES ('DISEÑO DE ALGORITMOS', 'APRENDERAS A DISEÑAR', '1', 'ROGELIO');
INSERT INTO "COURSES" ("TITLE", "DESCRIPTION", "LEVEL", "TEACHER") VALUES ('PROGRAMACION', 'APRENDERAS A PROGRAMAR', '2', 'MEREDITH');
INSERT INTO "ROLES" ("NAME") VALUES ('STUDENT'), ('TEACHER'), ('ADMIN');
INSERT INTO "COURSE_VIDEO" ("TITLE", "URL") VALUES ('DISEÑO', 'HTTPS:\\DISEÑO.COM'), ('ESTRUCTURA DE DATOS', 'HTTPS:\\ESTRUCTURADEDATOS.COM');